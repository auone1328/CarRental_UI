import React, { useState, useEffect } from 'react'
import { useNavigate } from 'react-router-dom'
import { useLocation } from 'react-router-dom';
import { format } from "date-fns"; 
import CarHeader from './CarHeader';
import MapViewer from '../../Map/MapViewer';
import "./Car.css"
import CarBook from './CarBook';
import $api from '../../../http';

export default function CarInfo() {
    const navigate = useNavigate()

    const [usedData, setUsedData] = useState([
                    {key: "releaseYear", text: "Год выпуска: ", data: null, icon: <svg className="m-2 fill-red-700" width="50" height="50" version="1.1" viewBox="0 0 846.66 846.66" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Layer_x0020_1"><path class="fil0" d="M130.28 100.65l53.14 0 0 -46.11c0,-27.24 41.42,-27.24 41.42,0l0 46.11 104.71 0 0 -46.11c0,-27.24 41.42,-27.24 41.42,0l0 46.11 104.72 0 0 -46.11c0,-27.24 41.41,-27.24 41.41,0l0 46.11 104.72 0 0 -46.11c0,-27.24 41.42,-27.24 41.42,0l0 46.11 53.14 0c66.87,0 121.51,54.64 121.51,121.51l0 468.88c0,66.87 -54.64,121.51 -121.51,121.51l-586.1 0c-66.87,0 -121.51,-54.64 -121.51,-121.51l0 -468.88c0,-66.87 54.64,-121.51 121.51,-121.51zm28.14 243.79l75.02 0c11.43,0 20.71,9.28 20.71,20.71l0 75.02c0,11.44 -9.28,20.71 -20.71,20.71l-75.02 0c-11.44,0 -20.71,-9.27 -20.71,-20.71l0 -75.02c0,-11.43 9.27,-20.71 20.71,-20.71zm54.31 41.42l-33.6 0 0 33.6 33.6 0 0 -33.6zm-54.31 107.45l75.02 0c11.43,0 20.71,9.27 20.71,20.71l0 75.02c0,11.43 -9.28,20.71 -20.71,20.71l-75.02 0c-11.44,0 -20.71,-9.28 -20.71,-20.71l0 -75.02c0,-11.44 9.27,-20.71 20.71,-20.71zm54.31 41.41l-33.6 0 0 33.61 33.6 0 0 -33.61zm400.49 -41.41l75.02 0c11.44,0 20.71,9.27 20.71,20.71l0 75.02c0,11.43 -9.27,20.71 -20.71,20.71l-75.02 0c-11.43,0 -20.71,-9.28 -20.71,-20.71l0 -75.02c0,-11.44 9.28,-20.71 20.71,-20.71zm54.31 41.41l-33.6 0 0 33.61 33.6 0 0 -33.61zm-205.91 -41.41l75.02 0c11.44,0 20.71,9.27 20.71,20.71l0 75.02c0,11.43 -9.27,20.71 -20.71,20.71l-75.02 0c-11.43,0 -20.71,-9.28 -20.71,-20.71l0 -75.02c0,-11.44 9.28,-20.71 20.71,-20.71zm54.31 41.41l-33.6 0 0 33.61 33.6 0 0 -33.61zm-205.91 -41.41l75.02 0c11.43,0 20.71,9.27 20.71,20.71l0 75.02c0,11.43 -9.28,20.71 -20.71,20.71l-75.02 0c-11.44,0 -20.71,-9.28 -20.71,-20.71l0 -75.02c0,-11.44 9.27,-20.71 20.71,-20.71zm54.31 41.41l-33.6 0 0 33.61 33.6 0 0 -33.61zm248.89 -190.28l75.02 0c11.44,0 20.71,9.28 20.71,20.71l0 75.02c0,11.44 -9.27,20.71 -20.71,20.71l-75.02 0c-11.43,0 -20.71,-9.27 -20.71,-20.71l0 -75.02c0,-11.43 9.28,-20.71 20.71,-20.71zm54.31 41.42l-33.6 0 0 33.6 33.6 0 0 -33.6zm-205.91 -41.42l75.02 0c11.44,0 20.71,9.28 20.71,20.71l0 75.02c0,11.44 -9.27,20.71 -20.71,20.71l-75.02 0c-11.43,0 -20.71,-9.27 -20.71,-20.71l0 -75.02c0,-11.43 9.28,-20.71 20.71,-20.71zm54.31 41.42l-33.6 0 0 33.6 33.6 0 0 -33.6zm-205.91 -41.42l75.02 0c11.43,0 20.71,9.28 20.71,20.71l0 75.02c0,11.44 -9.28,20.71 -20.71,20.71l-75.02 0c-11.44,0 -20.71,-9.27 -20.71,-20.71l0 -75.02c0,-11.43 9.27,-20.71 20.71,-20.71zm54.31 41.42l-33.6 0 0 33.6 33.6 0 0 -33.6zm-139.49 -223.48c0,27.24 -41.42,27.24 -41.42,0l0 -20.31 -53.14 0c-44.01,0 -80.09,36.08 -80.09,80.09l0 26.18 746.28 0 0 -26.18c0,-44.01 -36.08,-80.09 -80.09,-80.09l-53.14 0 0 20.31c0,27.24 -41.42,27.24 -41.42,0l0 -20.31 -104.72 0 0 20.31c0,27.24 -41.41,27.24 -41.41,0l0 -20.31 -104.72 0 0 20.31c0,27.24 -41.42,27.24 -41.42,0l0 -20.31 -104.71 0 0 20.31zm571.63 127.38l-746.28 0 0 401.28c0,44.01 36.08,80.09 80.09,80.09l586.1 0c44.01,0 80.09,-36.08 80.09,-80.09l0 -401.28z"/></g></svg>},
                    {key: "enginePower", text: "Мощность двигателя: ", data: null, icon: <svg className="m-2 fill-red-700" width="50" height="50" enable-background="new 0 0 64 64" id="Layer_1" version="1.1" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M57.3431396,26.1503296c-0.0012817-0.0018311-0.0020142-0.0039673-0.0032959-0.0057983  c-0.0009766-0.0014038-0.0021362-0.0026855-0.0031128-0.0040894c-0.0012817-0.0018311-0.0024414-0.0038452-0.0037231-0.0056763  c-0.0014648-0.0020752-0.00354-0.0036621-0.0050659-0.0057373c-1.0036011-1.4341431-2.1480103-2.7977295-3.4031372-4.0523682  c-0.5512695-0.5517578-1.1293945-1.0878906-1.7182617-1.59375c-0.8388672-0.7207031-2.1010742-0.6245117-2.8203125,0.2138672  c-0.7197266,0.8378906-0.6240234,2.1005859,0.2138672,2.8203125c0.512207,0.4399414,1.0151367,0.90625,1.4956055,1.3876953  c0.6786499,0.6781616,1.3192139,1.3919678,1.9163208,2.133606l-4.3634033,3.9912109C44.7294922,25.96521,38.7606201,23,32.25,23  h-0.5c-2.2949219,0-4.550293,0.3720703-6.7045898,1.1064453C24,24.4628906,23.4414063,25.5991211,23.7978516,26.6450195  c0.3564453,1.0454102,1.4912109,1.6020508,2.5385742,1.2475586C28.0737305,27.300293,29.8950195,27,31.75,27h0.5  c5.9089966,0,11.2714233,3.020874,14.3414917,8.0731201c0.0011597,0.0018921,0.0024414,0.0036011,0.00354,0.0054321  c0.0002441,0.0003662,0.0004272,0.0006714,0.0006714,0.0010376C48.168457,37.6987305,49,40.6967773,49,43.75V47h-9.8621826  l0.8577881-12.8671875c0.0581055-0.871582-0.456543-1.6806641-1.2709961-1.9970703  c-0.8149414-0.315918-1.7402344-0.0668945-2.2861328,0.6147461L25.0388794,47H15v-3.25  c0-0.4620361,0.0183716-0.9209595,0.0548706-1.3760986c0.2556152-3.1859131,1.3998413-6.1849976,3.348938-8.7454834  c0.8256836-1.0888672,1.784668-2.0761719,2.8500977-2.9345703c0.8603516-0.6928711,0.9960938-1.9516602,0.3032227-2.8120117  c-0.6923828-0.8603516-1.9506836-0.996582-2.8120117-0.3032227c-0.7017822,0.5651855-1.3629761,1.1784668-1.9846802,1.8284912  l-3.9940186-4.3546753C17.826355,19.9144897,24.7403564,17,32,17c4.2578125,0,8.3300781,0.9599609,12.1030273,2.8530273  c0.9868164,0.4956055,2.1884766,0.097168,2.6845703-0.890625c0.4956055-0.9873047,0.0966797-2.1894531-0.890625-2.6845703  C41.5620117,14.1030273,36.8862305,13,32,13c-9.0151978,0-17.5656738,3.9140015-23.460083,10.7385254  c-0.0005493,0.0006104-0.0012817,0.0010986-0.0018311,0.001709C3.6772461,29.3530273,1,36.5478516,1,44v5  c0,1.1044922,0.8955078,2,2,2h10h38h10c1.1044922,0,2-0.8955078,2-2v-5C63,37.5579834,61.0436401,31.3863525,57.3431396,26.1503296z   M35.5805664,40.2260742L35.1289063,47h-4.9676514L35.5805664,40.2260742z M5,44  c0-5.7324219,1.8178711-11.2885742,5.1572266-15.8740234l4.0947266,4.4638672  c-0.0014038,0.0021973-0.0025635,0.0045166-0.0039673,0.0067139c-0.0127563,0.0198975-0.0233154,0.0407715-0.0359497,0.0606689  c-0.2728271,0.428772-0.5275269,0.8662109-0.7664795,1.3108521c-0.0808716,0.1503906-0.1514893,0.3050537-0.2283936,0.4571533  c-0.161438,0.3191528-0.319519,0.6395264-0.463623,0.9659424c-0.0808105,0.1829834-0.1533813,0.3688965-0.2286987,0.5540161  c-0.1234131,0.3034058-0.2423706,0.6082153-0.3509521,0.9170532c-0.0696411,0.1980591-0.1343384,0.3974609-0.197876,0.5975952  c-0.0969238,0.305603-0.1865234,0.6132202-0.269043,0.9234619c-0.0540161,0.203125-0.1069336,0.40625-0.1547852,0.6112671  c-0.074585,0.3195801-0.1381836,0.6419067-0.1975098,0.9656372c-0.036438,0.1984253-0.0756226,0.395813-0.1062622,0.5957642  c-0.0541992,0.3540649-0.0934448,0.7114258-0.1295166,1.0697632c-0.017395,0.1726074-0.041626,0.3434448-0.0547485,0.5169067  C11.0238647,42.6748047,11,43.2103271,11,43.75V47H5V44z M59,47h-6v-3.25c0-0.4414673-0.0170288-0.8815918-0.0449219-1.3205566  c-0.0090332-0.1412354-0.0249023-0.2814941-0.0368042-0.4224243c-0.0250854-0.2978516-0.0532837-0.5950928-0.0910645-0.8911133  c-0.0209961-0.1646729-0.0467529-0.3282471-0.0717163-0.4922485c-0.041748-0.2744141-0.0877075-0.5477295-0.1403198-0.8200073  c-0.0319214-0.1653442-0.0656128-0.3301392-0.1015625-0.4946899c-0.0601807-0.2756958-0.1272583-0.5494385-0.1985474-0.8223877  c-0.0400391-0.1530762-0.0784912-0.3063965-0.1220093-0.4585571c-0.0870972-0.3049316-0.184082-0.6067505-0.2850342-0.9074707  c-0.0386353-0.1149902-0.072937-0.2311401-0.1135864-0.345459c-0.1486206-0.4181519-0.3087158-0.8323975-0.4839478-1.2409058  c-0.006897-0.0160522-0.0151367-0.0316772-0.0220947-0.0477295c-0.1483765-0.3434448-0.3040161-0.6838989-0.4710083-1.0195923  l0.8408813-0.769104l3.6478882-3.3364258C57.7290039,34.4814453,59,39.1523438,59,44V47z"/></svg>},
                    {key: "engineVolume", text: "Объём двигателя: ", data: null, icon: <svg className="icon icon-tabler icon-tabler-engine m-2" width="50" height="50" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" id="IconChangeColor"> <path stroke="#c10520" d="M0 0h24v24H0z" fill="none" id="mainIconPathAttribute" stroke-width="0"></path> <path d="M3 10v6" id="mainIconPathAttribute" stroke="#c10520"></path> <path d="M12 5v3" id="mainIconPathAttribute" stroke="#c10520"></path> <path d="M10 5h4" id="mainIconPathAttribute" stroke="#c10520"></path> <path d="M5 13h-2" id="mainIconPathAttribute" stroke="#c10520"></path> <path d="M6 10h2l2 -2h3.382a1 1 0 0 1 .894 .553l1.448 2.894a1 1 0 0 0 .894 .553h1.382v-2h2a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-2v-2h-3v2a1 1 0 0 1 -1 1h-3.465a1 1 0 0 1 -.832 -.445l-1.703 -2.555h-2v-6z" id="mainIconPathAttribute" stroke="#c10520"></path> </svg>}, 
                    {key: "engineType", text: "Тип двигателя: ", data: null, icon: <svg className="m-2 fill-red-700" width="50" height="50" data-name="019_transport" id="_019_transport" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path class="cls-1" d="M15,22H3a1,1,0,0,1-1-1V6A4,4,0,0,1,6,2h6a4,4,0,0,1,4,4v9.57a1,1,0,0,1-2,0V6a2,2,0,0,0-2-2H6A2,2,0,0,0,4,6V20H14v-.43a1,1,0,0,1,2,0V21A1,1,0,0,1,15,22Z"/><path class="cls-1" d="M9,19a3,3,0,0,1-3-3c0-2.35,2.06-4.47,2.29-4.71a1,1,0,0,1,1.42,0C9.94,11.53,12,13.65,12,16A3,3,0,0,1,9,19Zm0-5.44A4.64,4.64,0,0,0,8,16a1,1,0,0,0,2,0A4.64,4.64,0,0,0,9,13.56Z"/><path class="cls-1" d="M17,17H15a1,1,0,0,1,0-2h2a1,1,0,0,0,1-1V7a3,3,0,0,1,3-3,1,1,0,0,1,0,2,1,1,0,0,0-1,1v7A3,3,0,0,1,17,17Z"/><rect class="cls-1" height="4" rx="1" width="4" x="18" y="8"/><path class="cls-1" d="M11,9H7A1,1,0,0,1,7,7h4a1,1,0,0,1,0,2Z"/></svg>},                    
                    {key: "transmissionType", text: "Тип трансмиссии: ", data: null, icon: <svg className="m-2 fill-red-700" width="50" height="50" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C10.4812 2 9.25 3.23122 9.25 4.75C9.25 6.00878 10.0957 7.07002 11.25 7.39648V11.25C11.25 11.6642 11.5858 12 12 12C12.4142 12 12.75 11.6642 12.75 11.25V7.39648C13.9043 7.07002 14.75 6.00878 14.75 4.75C14.75 3.23122 13.5188 2 12 2ZM10.75 4.75C10.75 4.05964 11.3096 3.5 12 3.5C12.6904 3.5 13.25 4.05964 13.25 4.75C13.25 5.44036 12.6904 6 12 6C11.3096 6 10.75 5.44036 10.75 4.75ZM3 6.5C3 5.11929 4.11929 4 5.5 4C6.88071 4 8 5.11929 8 6.5V10H10.25V11.5H6.5V6.5C6.5 5.94772 6.05228 5.5 5.5 5.5C4.94772 5.5 4.5 5.94772 4.5 6.5V18.5C4.5 19.0523 4.94772 19.5 5.5 19.5C6.05228 19.5 6.5 19.0523 6.5 18.5V13.5H11V18.5C11 19.0523 11.4477 19.5 12 19.5C12.5523 19.5 13 19.0523 13 18.5V13.5H19C19.2761 13.5 19.5 13.2761 19.5 13V6.5C19.5 5.94772 19.0523 5.5 18.5 5.5C17.9477 5.5 17.5 5.94772 17.5 6.5V11.5H13.75V10H16V6.5C16 5.11929 17.1193 4 18.5 4C19.8807 4 21 5.11929 21 6.5V13C21 14.1046 20.1046 15 19 15H14.5V18.5C14.5 19.8807 13.3807 21 12 21C10.6193 21 9.5 19.8807 9.5 18.5V15H8V18.5C8 19.8807 6.88071 21 5.5 21C4.11929 21 3 19.8807 3 18.5V6.5Z"/></svg>}, 
                    {key: "seatsNumber", text: "Количество мест: ", data: null, icon: <svg className="m-2 fill-red-700" width="50" height="50" id="Layer_1_1_" version="1.1" viewBox="0 0 64 64" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M37,5H27v6h10V5z M35,9h-6V7h6V9z"/><path d="M36,53h-8c-2.191,0-4.285,1.047-5.601,2.801L21.2,57.4l1.6,1.199l1.199-1.599C24.939,55.748,26.435,55,28,55h8   c1.565,0,3.061,0.748,4.001,2l1.199,1.6l1.6-1.199L41.601,55.8C40.285,54.047,38.191,53,36,53z"/><path d="M49,47h-1.5l0.8-1.829c1.128-2.631,1.7-5.417,1.7-8.281c0-1.318-0.125-2.642-0.371-3.933L46.911,18.69   c-0.58-3.044-3.094-5.291-6.116-5.623C40.922,12.735,41,12.377,41,12V4c0-1.654-1.346-3-3-3H26c-1.654,0-3,1.346-3,3v8   c0,0.377,0.078,0.734,0.205,1.067c-3.022,0.332-5.537,2.58-6.116,5.623l-2.718,14.266C14.125,34.248,14,35.571,14,36.89   c0,2.864,0.572,5.65,1.7,8.281L16.485,47H15c-1.654,0-3,1.346-3,3v8c0,2.757,2.243,5,5,5h30c2.757,0,5-2.243,5-5v-8   C52,48.346,50.654,47,49,47z M44.946,19.064l2.718,14.267C47.887,34.5,48,35.697,48,36.89c0,2.592-0.518,5.112-1.538,7.494   l-1.355,3.168l-0.12,0.24C44.385,48.341,44,49.123,44,50v2.452c-0.599-0.633-1.276-1.179-2-1.65V15.42   C43.488,16.061,44.628,17.393,44.946,19.064z M24,21h16v4H24V21z M40,41.586L37.914,39.5L40,37.414V41.586z M32,27.414l3.086,3.086   L32,33.586L28.914,30.5L32,27.414z M27.5,29.086L25.414,27h4.172L27.5,29.086z M34.414,27h4.172L36.5,29.086L34.414,27z M30.586,35   L27.5,38.086L24.414,35l3.086-3.086L30.586,35z M32,36.414l3.086,3.086L32,42.586L28.914,39.5L32,36.414z M33.414,35l3.086-3.086   L39.586,35L36.5,38.086L33.414,35z M40,32.586L37.914,30.5L40,28.414V32.586z M24,28.414l2.086,2.086L24,32.586V28.414z M24,37.414   l2.086,2.086L24,41.586V37.414z M27.5,40.914L29.586,43h-4.172L27.5,40.914z M36.5,40.914L38.586,43h-4.172L36.5,40.914z M40,15v4   H24v-4h2h12H40z M24,45h16v4.773C38.736,49.277,37.383,49,36,49h-8c-1.383,0-2.736,0.277-4,0.773V45z M25,4c0-0.551,0.448-1,1-1h12   c0.552,0,1,0.449,1,1v8c0,0.551-0.448,1-1,1H26c-0.552,0-1-0.449-1-1V4z M16.336,33.331l2.718-14.267   c0.318-1.671,1.458-3.004,2.946-3.644v35.382c-0.724,0.471-1.401,1.017-2,1.65V50c0-0.869-0.377-1.645-0.968-2.194l-1.493-3.423   C16.518,42.002,16,39.481,16,36.89C16,35.697,16.113,34.5,16.336,33.331z M50,58c0,1.654-1.346,3-3,3H17c-1.654,0-3-1.346-3-3v-8   c0-0.552,0.448-1,1-1h2c0.552,0,1,0.448,1,1v5h2.5l0.3-0.399C22.491,52.346,25.183,51,28,51h8c2.817,0,5.509,1.346,7.2,3.601   L43.5,55H46v-5c0-0.552,0.448-1,1-1h2c0.552,0,1,0.448,1,1V58z"/></g></svg>}, 
                    {key: "drive", text: "Привод: ", data: null, icon: <svg className="m-2 fill-red-700" width="50" height="50" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><title/><g data-name="1" id="_1"><path d="M293.9,450H233.53a15,15,0,0,1-14.92-13.42l-4.47-42.09a152.77,152.77,0,0,1-18.25-7.56L163,413.53a15,15,0,0,1-20-1.06l-42.69-42.69a15,15,0,0,1-1.06-20l26.61-32.93a152.15,152.15,0,0,1-7.57-18.25L76.13,294.1a15,15,0,0,1-13.42-14.91V218.81A15,15,0,0,1,76.13,203.9l42.09-4.47a152.15,152.15,0,0,1,7.57-18.25L99.18,148.25a15,15,0,0,1,1.06-20l42.69-42.69a15,15,0,0,1,20-1.06l32.93,26.6a152.77,152.77,0,0,1,18.25-7.56l4.47-42.09A15,15,0,0,1,233.53,48H293.9a15,15,0,0,1,14.92,13.42l4.46,42.09a152.91,152.91,0,0,1,18.26,7.56l32.92-26.6a15,15,0,0,1,20,1.06l42.69,42.69a15,15,0,0,1,1.06,20l-26.61,32.93a153.8,153.8,0,0,1,7.57,18.25l42.09,4.47a15,15,0,0,1,13.41,14.91v60.38A15,15,0,0,1,451.3,294.1l-42.09,4.47a153.8,153.8,0,0,1-7.57,18.25l26.61,32.93a15,15,0,0,1-1.06,20L384.5,412.47a15,15,0,0,1-20,1.06l-32.92-26.6a152.91,152.91,0,0,1-18.26,7.56l-4.46,42.09A15,15,0,0,1,293.9,450ZM247,420h33.39l4.09-38.56a15,15,0,0,1,11.06-12.91A123,123,0,0,0,325.7,356a15,15,0,0,1,17,1.31l30.16,24.37,23.61-23.61L372.06,328a15,15,0,0,1-1.31-17,122.63,122.63,0,0,0,12.49-30.14,15,15,0,0,1,12.92-11.06l38.55-4.1V232.31l-38.55-4.1a15,15,0,0,1-12.92-11.06A122.63,122.63,0,0,0,370.75,187a15,15,0,0,1,1.31-17l24.37-30.16-23.61-23.61-30.16,24.37a15,15,0,0,1-17,1.31,123,123,0,0,0-30.14-12.49,15,15,0,0,1-11.06-12.91L280.41,78H247l-4.09,38.56a15,15,0,0,1-11.07,12.91A122.79,122.79,0,0,0,201.73,142a15,15,0,0,1-17-1.31L154.6,116.28,131,139.89l24.38,30.16a15,15,0,0,1,1.3,17,123.41,123.41,0,0,0-12.49,30.14,15,15,0,0,1-12.91,11.06l-38.56,4.1v33.38l38.56,4.1a15,15,0,0,1,12.91,11.06A123.41,123.41,0,0,0,156.67,311a15,15,0,0,1-1.3,17L131,358.11l23.61,23.61,30.17-24.37a15,15,0,0,1,17-1.31,122.79,122.79,0,0,0,30.13,12.49,15,15,0,0,1,11.07,12.91ZM449.71,279.19h0Z"/><path d="M263.71,340.36A91.36,91.36,0,1,1,355.08,249,91.46,91.46,0,0,1,263.71,340.36Zm0-152.72A61.36,61.36,0,1,0,325.08,249,61.43,61.43,0,0,0,263.71,187.64Z"/></g></svg>}, 
                    {key: "cost", text: "Cтоимость: ", data: null, icon: <svg className="m-2 fill-red-700" width="50" height="50" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8 21h2v-3h6v-2h-6v-2h4.5c2.757 0 5-2.243 5-5s-2.243-5-5-5H9a1 1 0 0 0-1 1v7H5v2h3v2H5v2h3v3zm2-15h4.5c1.654 0 3 1.346 3 3s-1.346 3-3 3H10V6z"/></svg>}
                ])

    const location = useLocation();
    const state = location.state || {};

    const carData = state.carData
    const isEdit = state?.isEdit || false
    const maintenance = state.maintenance || ""
    
    useEffect(() => {
        const getData = async (data) => {
            setUsedData(prevData => 
                prevData.map(item => ({
                ...item,
                data: carData[item.key] || null
            })))
        }   

        getData(carData)
        
    }, [])    
   

    // для модальнного окна брони
    const [isModalOpen, setIsModalOpen] = useState(false)

    return (
        <>
            <CarHeader headerText={isEdit ? "Админ-панель" : "Аренда автомобилей"} previous={isEdit ? "/admin" : "/"}/>
            <main>
                <div className="m-3 text-center">
                    <h1>{carData.brand} {carData.model}</h1>
                </div>
                <section className="divider info ml-50 mr-50 flex">
                    <div className="m-3 h-full">    
                        <img 
                            src={`data:${carData.contentType};base64,${carData.data}`} 
                            alt="Preview"   
                            className="shadow-xl rounded-md w-full h-full"/>          
                    </div>     
                    <div className="m-3">
                        <h3>Характеристики:</h3>
                        <div className="container">                            
                            <div className="row text-xl">
                                {                                   
                                    usedData.map((item) => {
                                        return (                                
                                            <li className="mb-3 mt-3 flex items-center list-none col-xl-6 col-lg-6 col-md-6 col-sm-12" key={item.key}>                                               
                                                {item.icon} {item.text} {item.data}  
                                            </li>
                                        )
                                    })          
                                }                                 
                            </div>    
                            {
                                isEdit ?
                                    <li className="mb-3 mt-3 flex text-lg items-center list-none col-xl-12 col-lg-12 col-md-12 col-sm-12" key={"maintenance"}>                                               
                                        <svg className="m-2 fill-red-700" width="50" height="50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" viewBox="0 0 512 512" xml:space="preserve"><g><path d="M380.957,281.962c-3.906-3.904-10.236-3.904-14.142,0c-5.848,5.849-15.365,5.848-21.213,0.001   c-5.849-5.85-5.849-15.366,0-21.214c11.044-11.046,11.561-28.297,2.196-39.974l42.352-42.352   c32.325,10.933,67.938,2.771,92.37-21.671c22.646-22.635,31.578-55.944,23.313-86.929c-1.988-7.455-11.308-9.919-16.731-4.495   l-20.722,20.711c-11.693,11.695-30.723,11.695-42.418,0c-11.695-11.694-11.695-30.724,0.002-42.42l20.709-20.72   c5.451-5.453,2.922-14.754-4.495-16.731c-30.979-8.266-64.293,0.667-86.926,23.31c-24.446,24.436-32.61,60.045-21.674,92.373   l-84.645,84.655L131.816,89.39l4.284-17.134c0.948-3.794-0.401-7.792-3.455-10.234L61.935,5.453   C57.956,2.27,52.22,2.588,48.617,6.19L6.19,48.616c-3.603,3.604-3.921,9.339-0.738,13.318l56.569,70.711   c2.443,3.054,6.443,4.403,10.234,3.454l17.135-4.283l117.115,117.115l-84.654,84.645C53.96,310.607-12.348,372.77,6.168,442.177   c1.987,7.45,11.302,9.921,16.731,4.495l20.722-20.711c11.724-11.725,30.696-11.723,42.417,0   c11.695,11.694,11.695,30.724-0.002,42.42l-20.71,20.72c-5.453,5.456-2.918,14.754,4.495,16.731   c69.292,18.488,131.578-47.747,108.601-115.683l42.353-42.353c11.787,9.475,29.029,8.747,39.973-2.195   c5.848-5.849,15.365-5.848,21.213-0.001c5.849,5.85,5.849,15.366,0,21.214c-3.905,3.905-3.905,10.237,0,14.142l113.137,113.137   c19.497,19.495,51.214,19.495,70.711,0l28.284-28.284c19.495-19.495,19.495-51.216,0-70.711L380.957,281.962z M352.291,131.42   c2.881-2.881,3.726-7.221,2.136-10.972c-19.546-46.126,14.102-96.704,63.729-97.309l-6.337,6.34   c-19.542,19.542-19.538,51.165,0,70.703c19.493,19.491,51.21,19.494,70.701,0.001l6.342-6.338   c-0.604,49.447-51.011,83.347-97.31,63.728c-3.75-1.591-8.091-0.745-10.973,2.136l-50.39,50.389   c-9.497-1.859-19.645,0.857-27.014,8.224l-21.213,21.213l-18.888-18.888L352.291,131.42z M157.572,391.553   c19.548,46.126-14.102,96.703-63.728,97.309l6.337-6.34c19.493-19.493,19.493-51.21,0-70.703   c-19.542-19.542-51.166-19.537-70.701-0.001l-6.341,6.338c0.602-49.501,51.072-83.322,97.309-63.729   c3.752,1.591,8.092,0.744,10.973-2.136l89.226-89.217l18.888,18.888l-21.213,21.213c-7.344,7.346-10.085,17.542-8.225,27.016   l-50.389,50.388C156.828,383.46,155.983,387.801,157.572,391.553z M479.951,451.667l-28.284,28.284   c-11.725,11.727-30.704,11.724-42.426,0L302.147,372.856c7.161-13.261,5.147-30.206-6.043-41.397   c-13.647-13.647-35.851-13.645-49.497,0c-5.078,5.078-13.054,3.123-15.959-2.459c-0.106-0.246-0.217-0.491-0.343-0.729   c-1.469-3.515-0.876-7.917,2.161-10.954l84.853-84.853c1.89-1.891,4.401-2.932,7.07-2.932c8.84,0,13.376,10.769,7.071,17.073   c-13.646,13.646-13.646,35.851,0.001,49.498c11.19,11.191,28.138,13.204,41.396,6.042l107.095,107.095   C491.678,420.966,491.675,439.945,479.951,451.667z"/><path d="M352.673,366.815c-3.906-3.904-10.236-3.904-14.143,0c-3.905,3.905-3.905,10.237,0,14.142l84.853,84.853   c3.906,3.904,10.235,3.905,14.143,0c3.905-3.905,3.905-10.237,0-14.143L352.673,366.815z"/><path d="M380.957,338.53c-3.906-3.904-10.236-3.904-14.142,0c-3.905,3.905-3.905,10.237,0,14.143l84.852,84.852   c3.906,3.904,10.235,3.906,14.143,0c3.905-3.905,3.905-10.237,0-14.143L380.957,338.53z"/></g></svg>
                                        <p>Дата последнего обслуживания: {maintenance.maintenanceDate ? format(maintenance.maintenanceDate, 'dd.MM.yyyy') : 'Данные отсутствуют.'}</p>       
                                        <p>Состояние автомобиля: {maintenance.carCondition || 'Данные отсутствуют.'}</p>                                
                                    </li>
                                :
                                <></>
                            }     
                            {!isEdit ? 
                                <button
                                    onClick={async () => {
                                        setIsModalOpen(true)           
                                    }}
                                    type="button"
                                    className={`group relative w-[50%] h-[45px] left-[50%] flex justify-center !mt-[38px] py-2 px-4 border border-transparent text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500`}
                                >                        
                                    Забронировать
                                </button> 
                            :
                                <></>
                            }               
                            <CarBook isModalOpen={isModalOpen} setIsModalOpen={setIsModalOpen} carData={carData}/>                             
                        </div>                       
                    </div>                                      
                </section>
                <section className="location ml-50 mr-50 flex">                  
                    <MapViewer  
                        address={`${carData.departmentAddress} Пермь, Россия`}
                    />  
                    <div className='m-4'>
                        <div className='flex'>
                            <svg className="m-3 fill-red-700" width="50" height="50" id="Icons" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><defs></defs><path class="cls-1" d="M2,10c0,8.491,9.126,13.658,9.514,13.874a1,1,0,0,0,.972,0C12.874,23.658,22,18.491,22,10A10,10,0,0,0,2,10ZM12,2a8.009,8.009,0,0,1,8,8c0,6.274-6.2,10.68-8,11.83C10.2,20.68,4,16.274,4,10A8.009,8.009,0,0,1,12,2Z"/><path class="cls-1" d="M12,15a5,5,0,1,0-5-5A5.006,5.006,0,0,0,12,15Zm0-8a3,3,0,1,1-3,3A3,3,0,0,1,12,7Z"/></svg>
                            <div className='inline-block'>
                                <h3>Местонахождение автомобиля:</h3>
                                <h5>{carData.departmentAddress}</h5>    
                            </div> 
                        </div> 
                        <div className='flex'>
                            <svg className="m-3 fill-red-700" width="50" height="50" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><title/><g data-name="1" id="_1"><path d="M348.73,450.06a198.63,198.63,0,0,1-46.4-5.85c-52.43-12.65-106.42-44.74-152-90.36s-77.71-99.62-90.36-152C46.65,146.75,56.15,99.61,86.69,69.07l8.72-8.72a42.2,42.2,0,0,1,59.62,0l50.11,50.1a42.18,42.18,0,0,1,0,59.62l-29.6,29.59c14.19,24.9,33.49,49.82,56.3,72.63s47.75,42.12,72.64,56.31L334.07,299a42.15,42.15,0,0,1,59.62,0l50.1,50.1a42.16,42.16,0,0,1,0,59.61l-8.73,8.72C413.53,439,383.73,450.06,348.73,450.06ZM125.22,78a12,12,0,0,0-8.59,3.56l-8.73,8.72c-22.87,22.87-29.55,60-18.81,104.49,11.37,47.13,40.64,96.1,82.41,137.86s90.73,71,137.87,82.41c44.5,10.74,81.61,4.06,104.48-18.81l8.72-8.72a12.16,12.16,0,0,0,0-17.19l-50.09-50.1a12.16,12.16,0,0,0-17.19,0l-37.51,37.51a15,15,0,0,1-17.5,2.72c-30.75-15.9-61.75-39.05-89.65-66.95s-51-58.88-66.94-89.63a15,15,0,0,1,2.71-17.5l37.52-37.51a12.16,12.16,0,0,0,0-17.19l-50.1-50.11A12.07,12.07,0,0,0,125.22,78Z"/><path d="M364.75,269.73a15,15,0,0,1-15-15,99.37,99.37,0,0,0-99.25-99.26,15,15,0,0,1,0-30c71.27,0,129.25,58,129.25,129.26A15,15,0,0,1,364.75,269.73Z"/><path d="M428.15,269.73a15,15,0,0,1-15-15c0-89.69-73-162.66-162.65-162.66a15,15,0,0,1,0-30c106.23,0,192.65,86.43,192.65,192.66A15,15,0,0,1,428.15,269.73Z"/></g></svg>
                            <div className='inline-block'>  
                                <h3>Контакты администрации подразделеиня:</h3>   
                                <h5>{carData.departmentPhoneNumber}</h5>  
                            </div>
                        </div>               
                    </div>   
                                                           
                </section>
            </main>
        </>
    )
}